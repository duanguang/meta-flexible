!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(t,n,i){function o(e,t){if(!e)throw new Error(D+": "+t)}function r(){o(!a(),"在使用当前工具库时请勿使用自定义viewpoint meta. viewpoint meta 将会通过当前工具自动计算生成.")}function a(){return n.querySelector('meta[name="viewport"]')}function c(){n.body?n.body.style.fontSize=12*L+"px":n.addEventListener("DOMContentLoaded",c)}function d(e,t){if(!e){if(!e){var i=a();i?e=i:(e=n.createElement("meta"),e.setAttribute("name","viewport"))}e.setAttribute("content",t);var o=C.querySelector("head");if(o)o.appendChild(e);else{var r=n.createElement("div");r.appendChild(e),n.write(r.innerHTML)}}else e.setAttribute("content",t);return e}function u(e){switch(e){case w.TargetDensityDpi:s();break;case w.ScaleRatio:f();break;default:o(!1,"未知 meta-flexible 方案, plan = "+e)}}function s(){S()}function f(){var e=t.screen.width,n=e/T;n>1&&(n=1),M(n)}function l(){if(L>=2){var e=n.createElement("body"),t=n.createElement("div");t.style.border=".5px solid transparent",e.appendChild(t),C.appendChild(e),1===t.offsetHeight&&C.classList.add("hairlines"),C.removeChild(e)}}function p(e){var t=C.clientWidth;e();var n=C.clientWidth;return v()===T?m.Unknown:n===t?m.No:m.Yes}function v(){return t.screen.width}var w={TargetDensityDpi:0,ScaleRatio:1},m={Yes:1,No:-1,Unknown:0},h={namespace:"meta-flexible",designViewpoint:750,getMetaViewpointTargetDensityDpiContent:function(e){return"width="+e+", target-densitydpi=device-dpi, user-scalable=no"},getMetaViewpointScaleRatioContent:function(e){return"width=device-width, initial-scale="+e+", maximum-scale="+e+", minimum-scale="+e+", user-scalable=no"},plans:[w.TargetDensityDpi,w.ScaleRatio],Plan:w},y=e({},h,i),g=y.getMetaViewpointTargetDensityDpiContent,b=y.getMetaViewpointScaleRatioContent,E=y.namespace,D=E,T=y.designViewpoint,C=n.documentElement,L=t.devicePixelRatio||1,_=[w.TargetDensityDpi,w.ScaleRatio],S=function(){var e=!1;return function(){e||(d(void 0,g(T)),e=!0)}}(),M=function(){var e=void 0;return function(t){e=d(e,b(t))}}(),x=function(){var e=void 0,t=m.No;return function(){if(e!==C.clientWidth){if(e=C.clientWidth,t===m.Yes)return void u(_[0]);for(;t===m.No;){if(_.length<=0){setTimeout(function(){return o(!1,E+"所使用的所有方案失效, 暂用最后一种方案兜底")});break}t=p(function(){return u(_[0])}),t===m.No&&_.shift()}t===m.Unknown&&(t=m.No)}}}();!function(){r(),c(),x(),t.addEventListener("resize",function(){var e=void 0;return function(){clearTimeout(e),e=setTimeout(x,300)}}()),t.addEventListener("pageshow",function(e){e.persisted&&x()},!1),l()}()}(window,document,window.__META_FLEXIBLE__=window.__META_FLEXIBLE__={})});
//# sourceMappingURL=meta-flexible.umd.min.js.map
